(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(16),s=n.n(i),o=n(6),r=(n(24),n.p,n(2)),a=(n(25),n(3)),l=n(0);var u=function(e){var t=e.onLogout,n=e.loggedOut,c=e.setLoggedOut;return Object(l.jsx)("header",{children:Object(l.jsxs)("h1",{children:[n?Object(l.jsx)(o.b,{to:"/",children:"Home          "}):null,n?null:Object(l.jsx)(o.b,{to:"/welcomepage",children:"Welcome Page"}),n?Object(l.jsx)(o.b,{to:"/login",children:"Log In"}):null,n?null:Object(l.jsx)(o.b,{to:"/myhikes",children:"My Hikes"}),n?Object(l.jsx)(o.b,{to:"/signup",children:"Sign Up "}):null,Object(l.jsx)(o.b,{to:"/hikes",children:"Hikes"}),n?null:Object(l.jsx)(o.b,{to:"/",onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(){return t()})),c(!0)},children:"Log Out"})]})})};var j=function(e){var t=e.handleLogIn,n=e.loggedOut,i=(e.handleLogout,Object(c.useState)("")),s=Object(r.a)(i,2),o=s[0],a=s[1],u=Object(c.useState)(""),j=Object(r.a)(u,2),d=j[0],h=j[1];return Object(l.jsx)("div",{children:n?Object(l.jsxs)("form",{className:"login",onSubmit:function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hikername:o,password:d})}).then((function(e){e.ok&&e.json().then((function(e){t(e)}))}))},children:[Object(l.jsx)("input",{type:"text",id:"inputname",placeholder:"Username",onChange:function(e){return a(e.target.value)}}),Object(l.jsx)("input",{type:"text",id:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)}}),Object(l.jsx)("button",{children:"Enter"})]}):null})},d=n(8);var h=function(e){var t=e.hikes,n=e.setHikes,i=e.displayedHikes,s=e.setDisplayedHikes,o=Object(c.useState)(""),a=Object(r.a)(o,2),u=a[0],j=a[1],h=Object(c.useState)(""),b=Object(r.a)(h,2),O=b[0],f=b[1],m=Object(c.useState)(""),p=Object(r.a)(m,2),x=p[0],g=p[1],k=Object(c.useState)(""),v=Object(r.a)(k,2),y=v[0],S=v[1],C=Object(c.useState)(0),H=Object(r.a)(C,2),L=H[0],D=H[1],N=Object(c.useState)(!1),w=Object(r.a)(N,2),E=w[0],T=w[1];function A(e){e.preventDefault(),"name"===e.target.name?f(e.target.value):"location"===e.target.name?S(e.target.value):"difficulty"===e.target.name?g(e.target.value):"distance"===e.target.name&&D(e.target.value)}var P={name:O,difficulty:x,location:y,distance:L,likes:0};return Object(l.jsxs)("div",{className:"add-hike-form",children:[Object(l.jsx)("button",{onClick:function(){T(!0)},children:"Add New Hike"}),E?Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===y||""===x||""===O?j("false"):void 0===t.find((function(e){return e.name.toLowerCase()===O.toLowerCase()}))?(!function(e){fetch("/hikes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){n([].concat(Object(d.a)(t),[e])),s([].concat(Object(d.a)(i),[e]))}))}(P),j("true")):j("taken"),T(!1)},children:[Object(l.jsx)("input",{onChange:A,type:"text",name:"name",placeholder:"Name"}),Object(l.jsx)("input",{onChange:A,type:"text",name:"location",placeholder:"City, State"}),Object(l.jsxs)("select",{name:"difficulty",id:"difficulty",onChange:A,children:[Object(l.jsx)("option",{value:"",hidden:!0,children:"Difficulty"}),Object(l.jsx)("option",{value:"Beginner",children:"Beginner"}),Object(l.jsx)("option",{value:"Intermediate",children:"Intermediate"}),Object(l.jsx)("option",{value:"Advanced",children:"Advanced"})]}),Object(l.jsx)("input",{onChange:A,type:"text",name:"distance",placeholder:"Miles"}),Object(l.jsx)("button",{className:"formbutton",children:"Submit"})]}):null,u?Object(l.jsx)("p",{children:"Thanks, your hike was added!"}):null]})},b=n(19);var O=function(e){var t=e.hike,n=e.user,i=Object(c.useState)(t),s=Object(r.a)(i,2),o=s[0],a=s[1],u=Object(c.useState)([]),j=Object(r.a)(u,2),h=j[0],O=j[1],f=Object(c.useState)(!1),m=Object(r.a)(f,2),p=m[0],x=m[1],g=Object(c.useState)(""),k=Object(r.a)(g,2),v=k[0],y=k[1],S=Object(c.useState)([]),C=Object(r.a)(S,2),H=C[0],L=C[1];function D(e){console.log(e),fetch("/comments/".concat(e.id),{method:"DELETE"}),L(H.filter((function(t){return t.id!==e.id})))}return Object(c.useEffect)((function(){fetch("/comments").then((function(e){return e.json()})).then((function(e){return O(e.map((function(e){return e})))}))}),[]),Object(l.jsxs)("div",{children:[Object(l.jsxs)("ul",{className:o.location,children:[o.name," - ",o.location," - ",o.distance," miles - ",o.difficulty,Object(l.jsx)("br",{}),Object(l.jsxs)("button",{onClick:function(e){e.preventDefault();var n=t.likes++;fetch("/hikes/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({likes:n})}).then((function(e){return e.json()})).then((function(e){return a(e)}))},children:[Object(l.jsx)(b.a,{}),"    ",o.likes," "]}),Object(l.jsx)("ul",{className:o.name,onClick:function(){return function(e){var t=h.filter((function(t){return t.hike.id===e.id}));t.length>0?L(t):L(["none"])}(o)},children:"Comments (click to view)"},o.name),"none"===H[0]?Object(l.jsx)("li",{children:"No Comments Yet"}):null,"none"!==H[0]&&H.length>1?H.map((function(e){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("li",{children:['"',e.text,'" -',e.hiker.hikername]}),Object(l.jsx)("button",{onClick:function(t){return D(e)},children:"-"})]})})):null,"none"!==H[0]&&1===H.length?Object(l.jsxs)("div",{children:[Object(l.jsxs)("li",{children:['"',H[0].text,'" -',H[0].hiker.hikername]}),Object(l.jsx)("button",{onClick:function(e){return D(H[0])},children:"-"})," "]}):null]},o.location),Object(l.jsx)("button",{style:{display:n?"visible":"none"},onClick:function(){x(!0)},children:"Add Comment"}),p?Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:v,hiker_id:n.id,hike_id:o.id})}).then((function(e){return e.json()})).then((function(e){O([].concat(Object(d.a)(h),[e])),H.length>0?L([].concat(Object(d.a)(H),[e])):L([e])}))},children:[Object(l.jsx)("input",{onChange:function(e){e.preventDefault(),y(e.target.value)},type:"text",name:"comment",placeholder:"Enter text here"}),Object(l.jsx)("button",{children:"Submit"})]}):null]})};var f=function(e){var t,n,i=e.user,s=e.userHikes,o=e.setUserHikes,a=Object(c.useState)([]),u=Object(r.a)(a,2),j=u[0],b=u[1],f=[],m=Object(c.useState)([]),p=Object(r.a)(m,2),x=p[0],g=p[1],k=Object(c.useState)([]),v=Object(r.a)(k,2),y=v[0],S=v[1],C=Object(c.useState)([]),H=Object(r.a)(C,2),L=H[0],D=H[1],N=Object(c.useState)(!1),w=Object(r.a)(N,2),E=w[0],T=w[1],A=Object(c.useState)(!1),P=Object(r.a)(A,2),U=P[0],I=P[1],J=[],B=[];function _(e){e.preventDefault();var t=j.find((function(t){return t.name===e.target.className}));s.find((function(e){return e.hike_id===t.id}))?console.log("Already listed"):fetch("/myhikes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hiker_id:i.id,hike_id:t.id,status:"Bucket list"})}).then((function(e){return e.json()})).then((function(e){o([].concat(Object(d.a)(s),[e]))}))}function M(e){e.preventDefault(),g(j),"location"===e.target.name&&(t=e.target.value,S(t)),"difficulty"===e.target.name&&(n=e.target.value,D(n))}function W(e){e.preventDefault(),T(!E),I(!U),"sortbylikes"===e.target.name&&!0===e.target.checked?x.sort((function(e,t){return e.likes>t.likes?-1:1})):"sortbylikes"===e.target.name&&!1===e.target.checked?x.sort((function(e,t){return e.likes>t.likes?1:-1})):"sortbydistance"===e.target.name&&!0===e.target.checked?x.sort((function(e,t){return e.distance>t.distance?-1:1})):"sortbydistance"===e.target.name&&!1===e.target.checked&&x.sort((function(e,t){return e.distance>t.distance?1:-1}))}return Object(c.useEffect)((function(){fetch("/hikes").then((function(e){return e.json()})).then((function(e){b(e),g(e)}))}),[]),j.map((function(e){f.includes(e.location)||f.push(e.location)})),j,Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("p",{children:"All Hikes"}),Object(l.jsxs)("div",{className:"filter",children:["Filter:",Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),J=void 0===y||"All"===y?j:j.filter((function(e){return e.location===y})),B=void 0===L||"All"===L?J:J.filter((function(e){return e.difficulty.toLowerCase()===L.toLowerCase()})),g(B)},children:[Object(l.jsxs)("select",{name:"difficulty",id:"difficulty",onChange:M,children:[Object(l.jsx)("option",{value:"",hidden:!0,children:"Difficulty"}),Object(l.jsx)("option",{value:"Advanced",children:"Advanced"}),Object(l.jsx)("option",{value:"Beginner",children:"Beginner"}),Object(l.jsx)("option",{value:"Intermediate",children:"Intermediate"}),Object(l.jsx)("option",{value:"All",children:"All"})]}),Object(l.jsx)("b",{children:" "}),Object(l.jsxs)("select",{name:"location",id:"location",onChange:M,children:[Object(l.jsx)("option",{value:"",hidden:!0,children:"Location"}),f.map((function(e){return Object(l.jsx)("option",{value:e,children:e})})),Object(l.jsx)("option",{value:"All",children:"All"})]}),Object(l.jsx)("button",{className:"formbutton",children:"Enter"})]})]}),Object(l.jsxs)("div",{className:"filter",children:["Sort:",Object(l.jsx)("br",{}),Object(l.jsxs)("label",{name:"sortbylikes",children:[" Likes (most to fewest)",Object(l.jsx)("input",{name:"sortbylikes",id:"sortLikes",type:"checkbox",onChange:W})]}),Object(l.jsxs)("label",{name:"sortbydistance",children:[" Distance (longest to shortest)",Object(l.jsx)("input",{name:"sortbydistance",id:"sortDistance",type:"checkbox",onChange:W})]})," "]}),x.map((function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("br",{})," ",Object(l.jsx)(O,{hike:e,user:i}),i?Object(l.jsx)("button",{className:e.name,onClick:_,children:"+"}):null]},e.id)})),Object(l.jsx)(h,{hikes:j,setHikes:b,displayedHikes:x,setDisplayedHikes:g})]})};var m=function(e){var t=e.user,n=e.handleLogout;return Object(l.jsxs)("div",{children:["Welcome, ",t.hikername,"!",Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{onClick:function(e){e.preventDefault(),fetch("/deleteme/".concat(t.id),{method:"DELETE"}).then((function(e){e.ok&&n()}))},children:"Delete My Account"})]})};var p=function(e){var t=e.user,n=e.handleLogIn,i=e.loggedOut,s=e.setLoggedOut,o=e.handleLogout,a=Object(c.useState)(""),u=Object(r.a)(a,2),j=u[0],d=u[1],h=Object(c.useState)(""),b=Object(r.a)(h,2),O=b[0],f=b[1],p=Object(c.useState)(""),x=Object(r.a)(p,2),g=x[0],k=x[1],v=Object(c.useState)([]),y=Object(r.a)(v,2),S=(y[0],y[1]);return Object(l.jsxs)("div",{children:[Object(l.jsxs)("form",{className:"signup",onSubmit:function(e){e.preventDefault(),S([]),fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hikername:j,password:O,password_confirmation:g})}).then((function(e){e.ok?e.json().then((function(e){return n(e)})):e.json().then((function(e){return S(e.errors)}))}))},children:[Object(l.jsx)("input",{type:"text",id:"username",placeholder:"Username",onChange:function(e){return d(e.target.value)}}),Object(l.jsx)("input",{type:"text",id:"password",placeholder:"Password",onChange:function(e){return f(e.target.value)}}),Object(l.jsx)("input",{type:"text",id:"confirmpassword",placeholder:"Confirm Password",onChange:function(e){return k(e.target.value)}}),Object(l.jsx)("button",{children:"Enter"})]}),t?Object(l.jsx)(m,{user:t,loggedOut:i,setLoggedOut:s,handleLogout:o}):null]})};var x=function(e){var t=e.user,n=e.userHikes,i=e.setUserHikes,s=Object(c.useState)(""),o=Object(r.a)(s,2),a=o[0],u=o[1],j=Object(c.useState)({}),d=Object(r.a)(j,2);function h(e,t){e.preventDefault(),u(e.target.value)}return d[0],d[1],Object(l.jsxs)("div",{children:[Object(l.jsxs)("p",{children:[t.hikername,"'s Hikes"]}),n.map((function(e){return Object(l.jsxs)("div",{className:"userhikes",children:[Object(l.jsx)("br",{}),Object(l.jsx)(O,{userHikes:n,setUserHikes:i,hikerhike:e,hike:e.hikemethod,user:t}),Object(l.jsxs)("form",{onSubmit:function(t){return function(e,t){t.preventDefault(),fetch("/hikerhikes/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})}).then((function(e){return e.json()})).then((function(e){var t=n.find((function(t){return t.id===e.id})),c=n.indexOf(t);n.splice(c,1,e),i(n)}))}(e,t)},children:[Object(l.jsxs)("select",{name:"Status",id:"status",onChange:h,children:[Object(l.jsx)("option",{value:"",hidden:!0,children:e.status}),Object(l.jsx)("option",{value:"Planned",children:"Planned"}),Object(l.jsx)("option",{value:"Completed",children:"Completed"}),Object(l.jsx)("option",{value:"Bucket list",children:"Bucket List"})]}),Object(l.jsx)("button",{children:"Submit"})]}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{onClick:function(t){return function(e,t){t.preventDefault(),fetch("/hikerhikes/".concat(e.id),{method:"DELETE"}),i(n.filter((function(t){return t.id!==e.id})))}(e,t)},children:"Delete from my hikes"}),Object(l.jsx)("br",{})]},e.id)}))]})};var g=function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(!0),o=Object(r.a)(s,2),d=o[0],h=o[1],b=Object(c.useState)([]),O=Object(r.a)(b,2),g=O[0],k=O[1];function v(e){i(e),h(!1),k(e.hikerhikes)}function y(){i(null),h(!0),k([])}function S(){k(n.hikerhikes)}return Object(c.useEffect)((function(){fetch("/me").then((function(e){e.ok&&e.json().then((function(e){i(e),h(!1)}))}))}),[]),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("h1",{className:"Hello",children:"Hiker's Hub"}),Object(l.jsx)(u,{user:n,onLogout:y,loggedOut:d,setLoggedOut:h}),Object(l.jsxs)(a.c,{children:[Object(l.jsx)(a.a,{exact:!0,path:"/hikes",children:Object(l.jsx)(f,{user:n,userHikes:g,setUserHikes:k,handleDeleteHH:S})}),Object(l.jsx)(a.a,{exact:!0,path:"/login",children:Object(l.jsx)(j,{handleLogIn:v,handleLogout:y,onLogout:y,user:n,setUser:i,loggedOut:d,setLoggedOut:h,setUserHikes:k,userHikes:g,handleDeleteHH:S})}),Object(l.jsx)(a.a,{exact:!0,path:"/signup",children:Object(l.jsx)(p,{handleLogIn:v,handleLogout:y,onLogout:y,user:n,setUser:i,loggedOut:d,setLoggedOut:h,setUserHikes:k,userHikes:g,handleDeleteHH:S})}),n&&!d?Object(l.jsx)(a.a,{exact:!0,path:"/myhikes",children:Object(l.jsx)(x,{user:n,setUserHikes:k,userHikes:g,handleDeleteHH:S})}):null,n&&!d?Object(l.jsx)(a.a,{exact:!0,path:"/welcomepage",children:Object(l.jsx)(m,{user:n,handleLogout:y,setUserHikes:k,userHikes:g,handleDeleteHH:S})}):null]})]})};s.a.render(Object(l.jsx)(o.a,{children:Object(l.jsx)(g,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.67add22b.chunk.js.map